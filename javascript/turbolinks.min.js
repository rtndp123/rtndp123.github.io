var anchoredLink,assetsChanged,browserCompatibleDocumentParser,browserIsntBuggy,browserSupportsPushState,cacheCurrentPage,changePage,constrainPageCacheTo,createDocument,crossOriginLink,currentState,executeScriptTags,extractLink,extractTitleAndBody,extractTrackAssets,fetchHistory,fetchReplacement,handleClick,ignoreClick,initializeTurbolinks,initialized,installClickHandlerLast,intersection,loadedAssets,noTurbolink,nonHtmlLink,nonStandardClick,pageCache,recallScrollPosition,referer,reflectNewUrl,reflectRedirectedUrl,rememberCurrentState,rememberCurrentUrl,rememberInitialPage,removeHash,requestMethod,requestMethodIsSafe,resetScrollPosition,targetLink,triggerEvent,visit,xhr,_ref,__hasProp={}.hasOwnProperty,__indexOf=[].indexOf||function(b){for(var a=0,c=this.length;
a<c;a++){if(a in this&&this[a]===b){return a;}}return -1;};initialized=false;currentState=null;referer=document.location.href;loadedAssets=null;pageCache={};
createDocument=null;requestMethod=((_ref=document.cookie.match(/request_method=(\w+)/))!=null?_ref[1].toUpperCase():void 0)||"";xhr=null;visit=function(a){if(browserSupportsPushState){cacheCurrentPage();
reflectNewUrl(a);return fetchReplacement(a);}else{return document.location.href=a;}};fetchReplacement=function(b){var a,c=this;triggerEvent("page:fetch");
a=removeHash(b);if(xhr!=null){xhr.abort();}xhr=new XMLHttpRequest;xhr.open("GET",a,true);xhr.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml");
xhr.setRequestHeader("X-XHR-Referer",referer);xhr.onload=function(){var d;d=createDocument(xhr.responseText);if(assetsChanged(d)){return document.location.reload();
}else{changePage.apply(null,extractTitleAndBody(d));reflectRedirectedUrl(xhr);if(document.location.hash){document.location.href=document.location.href;
}else{resetScrollPosition();}return triggerEvent("page:load");}};xhr.onloadend=function(){return xhr=null;};xhr.onabort=function(){return rememberCurrentUrl();
};xhr.onerror=function(){return document.location.href=b;};return xhr.send();};fetchHistory=function(b){var a;cacheCurrentPage();if(a=pageCache[b.position]){if(xhr!=null){xhr.abort();
}changePage(a.title,a.body);recallScrollPosition(a);return triggerEvent("page:restore");}else{return fetchReplacement(document.location.href);}};cacheCurrentPage=function(){rememberInitialPage();
pageCache[currentState.position]={url:document.location.href,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset};
return constrainPageCacheTo(10);};constrainPageCacheTo=function(c){var a,d,b;b=[];for(a in pageCache){if(!__hasProp.call(pageCache,a)){continue;}d=pageCache[a];
if(a<=currentState.position-c){b.push(pageCache[a]=null);}else{b.push(void 0);}}return b;};changePage=function(b,a,c){document.title=b;document.documentElement.replaceChild(a,document.body);
if(c){executeScriptTags();}currentState=window.history.state;return triggerEvent("page:change");};executeScriptTags=function(){var q,y,g,b,k,z,d,x,w,p,j,v,m;
p=document.body.getElementsByTagName("script");m=[];for(z=0,x=p.length;z<x;z++){k=p[z];if(!((j=k.type)===""||j==="text/javascript")){continue;}y=document.createElement("script");
v=k.attributes;for(d=0,w=v.length;d<w;d++){q=v[d];y.setAttribute(q.name,q.value);}y.appendChild(document.createTextNode(k.innerHTML));b=k.parentNode,g=k.nextSibling;
b.removeChild(k);m.push(b.insertBefore(y,g));}return m;};reflectNewUrl=function(a){if(a!==document.location.href){referer=document.location.href;return window.history.pushState({turbolinks:true,position:currentState.position+1},"",a);
}};reflectRedirectedUrl=function(b){var a;if((a=b.getResponseHeader("X-XHR-Current-Location"))&&a!==document.location.pathname+document.location.search){return window.history.replaceState(currentState,"",a+document.location.hash);
}};rememberCurrentUrl=function(){return window.history.replaceState({turbolinks:true,position:Date.now()},"",document.location.href);};rememberCurrentState=function(){return currentState=window.history.state;
};rememberInitialPage=function(){if(!initialized){rememberCurrentUrl();rememberCurrentState();createDocument=browserCompatibleDocumentParser();return initialized=true;
}};recallScrollPosition=function(a){return window.scrollTo(a.positionX,a.positionY);};resetScrollPosition=function(){return window.scrollTo(0,0);};removeHash=function(b){var a;
a=b;if(b.href==null){a=document.createElement("A");a.href=b;}return a.href.replace(a.hash,"");};triggerEvent=function(b){var a;a=document.createEvent("Events");
a.initEvent(b,true,true);return document.dispatchEvent(a);};extractTrackAssets=function(f){var b,g,d,a,c;a=f.head.childNodes;c=[];for(g=0,d=a.length;g<d;
g++){b=a[g];if((typeof b.getAttribute==="function"?b.getAttribute("data-turbolinks-track"):void 0)!=null){c.push(b.src||b.href);}}return c;};assetsChanged=function(b){var a;
loadedAssets||(loadedAssets=extractTrackAssets(document));a=extractTrackAssets(b);return a.length!==loadedAssets.length||intersection(a,loadedAssets).length!==loadedAssets.length;
};intersection=function(f,b){var h,d,a,c,g;if(f.length>b.length){c=[b,f],f=c[0],b=c[1];}g=[];for(d=0,a=f.length;d<a;d++){h=f[d];if(__indexOf.call(b,h)>=0){g.push(h);
}}return g;};extractTitleAndBody=function(b){var a;a=b.querySelector("title");return[a!=null?a.textContent:void 0,b.body,"runScripts"];};browserCompatibleDocumentParser=function(){var c,a,d,b;
c=function(f){return(new DOMParser).parseFromString(f,"text/html");};a=function(g){var f;f=document.implementation.createHTMLDocument("");f.open("replace");
f.write(g);f.close();return f;};if(window.DOMParser){d=c("<html><body><p>test");}if((d!=null?(b=d.body)!=null?b.childNodes.length:void 0:void 0)===1){return c;
}else{return a;}};installClickHandlerLast=function(a){if(!a.defaultPrevented){document.removeEventListener("click",handleClick);return document.addEventListener("click",handleClick);
}};handleClick=function(b){var a;if(!b.defaultPrevented){a=extractLink(b);if(a.nodeName==="A"&&!ignoreClick(b,a)){visit(a.href);return b.preventDefault();
}}};extractLink=function(b){var a;a=b.target;while(!(!a.parentNode||a.nodeName==="A")){a=a.parentNode;}return a;};crossOriginLink=function(a){return location.protocol!==a.protocol||location.host!==a.host;
};anchoredLink=function(a){return(a.hash&&removeHash(a))===removeHash(location)||a.href===location.href+"#";};nonHtmlLink=function(a){return a.href.match(/\.[a-z]+(\?.*)?$/g)&&!a.href.match(/\.html?(\?.*)?$/g);
};noTurbolink=function(b){var a;while(!(a||b===document)){a=b.getAttribute("data-no-turbolink")!=null;b=b.parentNode;}return a;};targetLink=function(a){return a.target.length!==0;
};nonStandardClick=function(a){return a.which>1||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey;};ignoreClick=function(b,a){return crossOriginLink(a)||anchoredLink(a)||nonHtmlLink(a)||noTurbolink(a)||targetLink(a)||nonStandardClick(b);
};initializeTurbolinks=function(){document.addEventListener("click",installClickHandlerLast,true);return window.addEventListener("popstate",function(b){var a;
if((a=b.state)!=null?a.turbolinks:void 0){return fetchHistory(b.state);}});};browserSupportsPushState=window.history&&window.history.pushState&&window.history.replaceState&&window.history.state!==void 0;
browserIsntBuggy=!navigator.userAgent.match(/CriOS\//);requestMethodIsSafe=requestMethod==="GET"||requestMethod==="";if(browserSupportsPushState&&browserIsntBuggy&&requestMethodIsSafe){initializeTurbolinks();
}this.Turbolinks={visit:visit};